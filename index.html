<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Chúc Mừng Năm Mới.</title>
	<link rel="stylesheet" href="">
</head>
<style type="text/css" media="screen">
	* {
		margin: 0;
		padding: 0;

	}
	body {
		background: #003056;
	}
	section {
		position: absolute;
		width: 100%;
		height: 100vh;
	}
	.fireworks {
		position: fixed;
	}
	.content {
		z-index: 1;
		color: #fff;
		display: flex;
		justify-content: center;
		align-items: center;
		text-align: center;
	}
	.content h2 {
		-webkit-text-stroke:  1px #fff;
		color:  transparent;
		font-size: 8em;
		line-height: .9em;
		animation: animateColor2 3s linear infinite;
	}
	.content h2 b {
		color: #fff;
		-webkit-text-stroke:  0px #fff;
		animation: animateColor 3s linear infinite;
	}
	@keyframes animateColor {
		0%
		{
			filter: hue-rotate(0deg);
			color: red;
		}
		100%{
			filter: hue-rotate(360deg);
			color: blue;
		}
	}
	.set {
		position: absolute;
		width: 100%;
		height: 100%;
		top: 0;
		left: 0;

	}
	.set div {
		position: absolute;
		display: block;

	}
	.set div {

	}
	canvas {
		position: fixed;
	}
	

</style>
<body>
	
	<section>
		<div class="set">
			<div>
				<img src="anime-hoa-anh-dao-lang-man_102149426.jpg" alt="">
			</div>
		</div>
	</section>
	<iframe src="https://www.nhaccuatui.com/mh/auto/tczRiWaOiLZl" type="audio/mpeg" allow="autoplay" id="yourAudio"  style="display:none"></iframe>
	<audio id="yourAudio"  autoplay>
		<source src="LamGiPhaiHot-JustaTeeDenHoangThuyLinh-6198647.mp3" type="audio/mpeg">
		</audio>

        <canvas id="canvas"></canvas>
		<section class="fireworks"></section>
		<section class="content">
			<h2>Happy New Year <b>2021</b></h2>
		</section>


		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<script type="text/javascript" src="jquery.fireworks.js"></script>
		<script>
			$('.fireworks').fireworks ({
				sound:false,
				opacity : 0.9,
				width: '100%',
				height : '100%'
			});
			document.getElementById('yourAudio').addEventListener("mouseup", tapOrClick, false);
			document.getElementById('yourAudio').addEventListener("touchend", tapOrClick, false);

			function tapOrClick(e) {
				var mp3 = e.target;
				mp3.parentNode.getElementsByTagName('audio')[0].play();
			}
			
		</script>
		<script type="text/javascript">
			"use strict";

			let canvas, width, height, ctx;
			let fireworks = [];
			let particles = [];

			function setup() {
				canvas = document.getElementById("canvas");
				setSize(canvas);
				ctx = canvas.getContext("2d");
				ctx.fillStyle = "#000000";
				ctx.fillRect(0, 0, width, height);
				fireworks.push(new Firework(Math.random()*(width-200)+100));
				window.addEventListener("resize",windowResized);
				document.addEventListener("click",onClick);
			}

			setTimeout(setup,1);

			function loop(){
				ctx.globalAlpha = 0.1;
				ctx.fillStyle = "#000000";
				ctx.fillRect(0, 0, width, height);
				ctx.globalAlpha = 1;

				for(let i=0; i<fireworks.length; i++){
					let done = fireworks[i].update();
					fireworks[i].draw();
					if(done) fireworks.splice(i, 1);
				}

				for(let i=0; i<particles.length; i++){
					particles[i].update();
					particles[i].draw();
					if(particles[i].lifetime>80) particles.splice(i,1);
				}

				if(Math.random()<1/60) fireworks.push(new Firework(Math.random()*(width-200)+100));
			}
			setInterval(loop, 1/60);
//setInterval(loop, 100/60);
class Particle{
	constructor(x, y, col){
		this.x = x;
		this.y = y;
		this.col = col;
		this.vel = randomVec(2);
		this.lifetime = 0;
	}

	update(){
		this.x += this.vel.x;
		this.y += this.vel.y;
		this.vel.y += 0.02;
		this.vel.x *= 0.99;
		this.vel.y *= 0.99;
		this.lifetime++;
	}

	draw(){
		ctx.globalAlpha = Math.max(1-this.lifetime/80, 0);
		ctx.fillStyle = this.col;
		ctx.fillRect(this.x, this.y, 2, 2);
	}
}

class Firework{
	constructor(x){
		this.x = x;
		this.y = height;
		this.isBlown = false;
		this.col = randomCol();
	}

	update(){
		this.y -= 3;
		if(this.y < 350-Math.sqrt(Math.random()*500)*40){
			this.isBlown = true;
			for(let i=0; i<60; i++){
				particles.push(new Particle(this.x, this.y, this.col))
			}
		}
		return this.isBlown;
	}

	draw(){
		ctx.globalAlpha = 1;
		ctx.fillStyle = this.col;
		ctx.fillRect(this.x, this.y, 2, 2);
	}
}

function randomCol(){
	var letter = '0123456789ABCDEF';
	var nums = [];

	for(var i=0; i<3; i++){
		nums[i] = Math.floor(Math.random()*256);
	}

	let brightest = 0;
	for(var i=0; i<3; i++){
		if(brightest<nums[i]) brightest = nums[i];
	}

	brightest /=255;
	for(var i=0; i<3; i++){
		nums[i] /= brightest;
	}

	let color = "#";
	for(var i=0; i<3; i++){
		color += letter[Math.floor(nums[i]/16)];
		color += letter[Math.floor(nums[i]%16)];
	}
	return color;
}

function randomVec(max){
	let dir = Math.random()*Math.PI*2;
	let spd = Math.random()*max;
	return{x: Math.cos(dir)*spd, y: Math.sin(dir)*spd};
}

function setSize(canv){
	canv.style.width = (innerWidth) + "px";
	canv.style.height = (innerHeight) + "px";
	width = innerWidth;
	height = innerHeight;

	canv.width = innerWidth*window.devicePixelRatio;
	canv.height = innerHeight*window.devicePixelRatio;
	canvas.getContext("2d").scale(window.devicePixelRatio, window.devicePixelRatio);
}

function onClick(e){
	fireworks.push(new Firework(e.clientX));
}

function windowResized(){
	setSize(canvas);
	ctx.fillStyle = "#000000";
	ctx.fillRect(0, 0, width, height);
}
</script>
</body>
</html>